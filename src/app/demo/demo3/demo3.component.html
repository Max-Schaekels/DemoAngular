<section class="demo">
    <h1>Demo 3 : Les directives ‚û∞</h1>
    <p>Elles nous servent √† apporter encore un peu plus de logique. Par exemple appliquer du style ou non, afficher du
        contenu contextuellement, afficher une liste, etc</p>

    <h2>üñåÔ∏è Les components directives</h2>
    <h3>‚Ä¢ ngModel : <a routerLink="/demo1">(voir bindings)</a> </h3>
    <p>Servait pour property binding 2 way</p>

    <h3>‚Ä¢ ngStyle :</h3>
    <p>Permet cr√©er du style inline reli√© √† une propri√©t√© (attention, √ßa reste du style inline, si on peut passer par du
        css c'est mieux)</p>

    <div>
        <p [ngStyle]="{color: textColor}">Une phrase √† styliser.</p>
        <button (click)="changeTextColor()" class="btn">Changer couleur</button>
    </div>

    <code ngNonBindable>
        <span class="comment">//Dans la partie HTML</span>
        &lt;p [ngStyle]="&#123;color: textColor&#125;" &gt; Une phrase √† styliser. &lt;/p&gt; <br>
        <span class="comment">//O√π textColor est une variable qu'on va modifier dans laquelle est stock√©e une couleur (ex: darkred)</span>
    </code>

    <h3>‚Ä¢ ngClass :</h3>
    <p>Permet d'associer une classe CSS √† une expression bool√©enne pour savoir si elle s'applique ou non</p>

    <p [ngClass]="{'colere-0': niveauColere === 0, 'colere-1' : niveauColere === 1, 'colere-2': niveauColere === 2, 'colere-3' : niveauColere >= 3}"
        (click)="insulter()">Barom√®tre de col√®re (cliquer pour insulter)</p>

    <code ngNonBindable>
        <span class="comment">//Dans la partie HTML</span>
        &lt;p <br> &nbsp;&nbsp;[ngClass]="&#123;'colere-0': niveauColere === 0, 'colere-1' : niveauColere === 1, 'colere-2': niveauColere === 2, 'colere-3' : niveauColere >= 3&#125;"<br> &nbsp;&nbsp;(click)="insulter()"&gt; Barom√®tre de col√®re (cliquer pour insulter) &lt;/p&gt; <br>
        <span class="comment">//O√π insulter() augmente de 1 la variable niveauColere</span>
    </code>

    <h2>üß± Les structurals directives (rework depuis la version 16)</h2>
    <h3>ngIf ‚Üí &commat;if <button class="btn" (click)="faireJour = !faireJour">Jour/Nuit</button></h3>

    <div class="flex-row">
        <div>
            <h4>Avec le ngIf :</h4>
            <p *ngIf="faireJour; else night">Jour üåû</p>
            <!-- Comme le else avec un ngTemplate n'√©tait pas tr√®s pratique √† mettre en place, beauoup faisaient un nouveau ngIf mais avec la condition invers√©e  -->
            <!-- <p *ngIf="!faireJour">Nuit üåö</p> -->

            <ng-template #night>
                <p>Nuit üåö</p>
            </ng-template>

            <code ngNonBindable>
                <span class="comment">//Dans la partie HTML</span>
                &lt;p *ngIf="faireJour; else night" &gt; Jour üåû &lt;/p&gt; <br>
                &lt;ng-template #night&gt; <br>
                &nbsp;&nbsp;&nbsp;&lt;p&gt; Nuit üåö &lt;/p&gt;<br>
                &lt;/ng-template&gt; <br>
                 <br>
            </code>
        </div>

        <div>
            <h4>Avec le &commat;if :</h4>
            @if(faireJour) {
            <p>Jour üåû</p>
            }@else {
            <p>Nuit üåö</p>
            }

            <code ngNonBindable>
                <span class="comment">//Dans la partie HTML</span>
                &commat;if(faireJour) &#123;<br>
                &nbsp;&nbsp;&nbsp;&lt;p&gt; Jour üåû &lt;/p&gt; <br>
                &#125;<br>
                &commat;else&#123;<br>
                &nbsp;&nbsp;&nbsp;&lt;p&gt; Nuit üåö &lt;/p&gt;<br>
                &#125;<br>
            </code>
        </div>
    </div>


    <h3>ngFor ‚Üí &commat;for </h3>
    <p>Permet de parcourir des listes pour g√©n√©rer un affichage automatique (voire dynamique)</p>

    <div class="flex-row">
        <div>
            <h4>Avec le ngFor :</h4>

            <ul *ngIf="formateurs.length > 0">
                <li *ngFor="let formateur of formateurs"> {{ formateur }} </li>
            </ul>
            <p *ngIf="formateurs.length === 0">Pas de formateurs</p>

            <p>Nous devrons tester nous m√™me avec un if si la liste est vide pour afficher un message si c'est le cas.</p>

            <code ngNonBindable>
                <span class="comment">//Dans la partie HTML</span>
                &lt;ul&gt; <br>
                &nbsp;&nbsp;&nbsp;&lt;li *ngFor="let formateur of formateurs" &gt; <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ formateur }} <br>
                &nbsp;&nbsp;&nbsp;&lt;/li&gt; <br>
                &lt;/ul&gt; <br>
                &lt;p *ngIf="formateurs.length === 0" &gt; Pas de formateurs &lt;/p&gt;
            </code>
        </div>

        <div>
            <h4>Avec le &commat;for :</h4>
            <ul>
                <!-- idealement quand on aura un objet plus complexe, on va track sur l'id -->
                @for(formateur of formateurs; track formateur){
                <li> {{ formateur }} </li>
                }@empty {
                <!-- @empty -> contenu affich√© si le tableau sur lequel on fait un for est vide -->
                <p>Pas de formateurs</p>
                }
            </ul>
             <p>Avec cette m√©thode, nous serons oblig√©s de renseigner un tracker afin d'optimiser le rendu. Seulement la valeur modifi√©e sera re-rendue √† la place de toute la liste si notre liste est modifi√©e.</p>

             <code ngNonBindable>
                <span class="comment">//Dans la partie HTML</span>
                &lt;ul&gt; <br>
                &nbsp;&nbsp;&nbsp;&commat;for(formateur of formateurs; track formateur)&#123;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;{{ formateur }}&lt;/li&gt;<br>
                &nbsp;&nbsp;&nbsp;&#125;<br>
                &nbsp;&nbsp;&nbsp;&commat;else&#123;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt; Pas de formateurs &lt;/p&gt;<br>
                &nbsp;&nbsp;&nbsp;&#125;<br>
                &lt;/ul&gt; <br>
                
            </code>
        </div>
    </div>




    <h3>ngSwitch ‚Üí &commat;switch </h3>
    <h4>Avec le ngSwitch : </h4>

    <div [ngSwitch]="jourDeLaSemaine">
        <div *ngSwitchCase="1">Lundi : Des patates</div>
        <div *ngSwitchCase="2">Mardi : Raviolis</div>
        <div *ngSwitchCase="3">Mercredi : Burger</div>
        <div *ngSwitchCase="4">Jeudi : Pizzas</div>
        <div *ngSwitchCase="5">Vendredi : Frites</div>
        <div *ngSwitchCase="6">Samedi : Indien</div>
        <div *ngSwitchCase="0">Dimanche : Poulet-Compote</div>
        <div *ngSwitchDefault>[Erreur] Ce jour n'existe pas</div>
    </div>

    <h4>Avec le &commat;switch : </h4>
    @switch (jourDeLaSemaine) {
    @case (1) {
    <div>Lundi : Des patates</div>
    }
    @case (2) {
    <div>Mardi : Raviolis</div>
    }
    @case (3) {
    <div>Mercredi : Burger</div>
    }
    <!-- etc j'ai la flemme -->
    @default {
    <div>[Erreur] Ce jour n'existe pas</div>
    }
    }

    <h2>Et si on les combinait pour un petit r√©cap ?</h2>
    <div class="pizzas">
        @for( product of products; track product.id ){

        <div class="card">
            @if(product.promo){
            <div class="tag">Promo</div>
            }

            <div class="card-top">
                <img [src]="product.image" [alt]="product.name">
                <p class="title">{{product.name}}</p>
            </div>

            <div class="card-bot">
                <span>Prix :</span>
                <div class="prices">
                    @if(product.promo){
                    <p class="promo">{{product.pricePromo | number : '0.2' }}‚Ç¨</p>
                    }
                    <p [ngClass]="{'price-before': product.promo}">{{product.price | number : '0.2'}}‚Ç¨</p>
                </div>
            </div>

        </div>
        }

    </div>

    <h2>Les customs directives</h2>
</section>

